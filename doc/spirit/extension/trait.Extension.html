<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `Extension` trait in crate `spirit`."><meta name="keywords" content="rust, rustlang, rust-lang, Extension"><title>spirit::extension::Extension - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script src="../../storage.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../favicon.svg">
<link rel="alternate icon" type="image/png" href="../../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc trait"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../spirit/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><p class='location'>Trait Extension</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#required-methods">Required Methods</a><div class="sidebar-links"><a href="#tymethod.apply">apply</a></div><a class="sidebar-title" href="#implementors">Implementors</a></div><p class='location'><a href='../index.html'>spirit</a>::<wbr><a href='index.html'>extension</a></p><script>window.sidebarCurrent = {name: 'Extension', ty: 'trait', relpath: ''};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><span class="help-button">?</span>
                <a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../src/spirit/extension.rs.html#652-659' title='goto source code'>[src]</a></span><span class='in-band'>Trait <a href='../index.html'>spirit</a>::<wbr><a href='index.html'>extension</a>::<wbr><a class="trait" href=''>Extension</a></span></h1><div class="docblock type-decl hidden-by-usual-hider"><pre class='rust trait'>pub trait Extension&lt;B&gt; {
    fn <a href='#tymethod.apply' class='fnname'>apply</a>(self, builder: B) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;B, <a class="type" href="../../spirit/error/type.AnyError.html" title="type spirit::error::AnyError">AnyError</a>&gt;;
}</pre></div><div class='docblock'><p>The basic extension trait.</p>
<p>It allows being plugged into a <a href="../../spirit/struct.Builder.html" title="crate::Builder"><code>Builder</code></a> or <a href="../../spirit/struct.Spirit.html" title="crate::Spirit"><code>Spirit</code></a> and
modifying it in an arbitrary way.</p>
<p>It is more common to apply the helper by the
<a href="../../spirit/extension/trait.Extensible.html#tymethod.with" title="Extensible::with"><code>with</code></a> or <a href="../../spirit/extension/trait.Extensible.html#tymethod.with_singleton" title="Extensible::with_singleton"><code>with_singleton</code></a> method than
directly.</p>
<p>There's an implementation of <code>Extension</code> for <code>FnOnce(Extensible) -&gt; Result&lt;Extensible, AnyError&gt;</code>,
so extensions can be either custom types or just closures (which are often more convenient than
defining an empty type and the implementation).</p>
<p>It is better to define the extension in a generic way (eg. accepting any type that is
<a href="../../spirit/extension/trait.Extensible.html" title="Extensible"><code>Extensible</code></a>) instead of eg. a <a href="../../spirit/struct.Builder.html" title="crate::Builder"><code>Builder</code></a> directly. Note that sometimes it
is needed to restrict the acceptable <a href="../../spirit/extension/trait.Extensible.html" title="Extensible"><code>Extensible</code></a>s to the base ones, with <code>Ok = E</code>, like in
the example below. They'll still be possible to apply to <code>Result</code>s.</p>
<h1 id="examples" class="section-header"><a href="#examples">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">spirit</span>::{<span class="ident">AnyError</span> ,<span class="ident">Empty</span>, <span class="ident">Spirit</span>};
<span class="kw">use</span> <span class="ident">spirit</span>::<span class="ident">extension</span>::{<span class="ident">Extension</span>, <span class="ident">Extensible</span>};
<span class="kw">use</span> <span class="ident">spirit</span>::<span class="ident">prelude</span>::<span class="kw-2">*</span>;

<span class="kw">struct</span> <span class="ident">CfgPrint</span>;

<span class="kw">impl</span><span class="op">&lt;</span><span class="ident">E</span>: <span class="ident">Extensible</span><span class="op">&lt;</span><span class="prelude-val">Ok</span> <span class="op">=</span> <span class="ident">E</span><span class="op">&gt;</span><span class="op">&gt;</span> <span class="ident">Extension</span><span class="op">&lt;</span><span class="ident">E</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">CfgPrint</span> {
    <span class="kw">fn</span> <span class="ident">apply</span>(<span class="self">self</span>, <span class="ident">ext</span>: <span class="ident">E</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">E</span>, <span class="ident">AnyError</span><span class="op">&gt;</span> {
        <span class="prelude-val">Ok</span>(<span class="ident">ext</span>.<span class="ident">on_config</span>(<span class="op">|</span><span class="ident">_opts</span>, <span class="ident">_config</span><span class="op">|</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Config changed&quot;</span>)))
    }
}

<span class="ident">Spirit</span>::<span class="op">&lt;</span><span class="ident">Empty</span>, <span class="ident">Empty</span><span class="op">&gt;</span>::<span class="ident">new</span>()
    .<span class="ident">with</span>(<span class="ident">CfgPrint</span>)
    .<span class="ident">run</span>(<span class="op">|</span><span class="ident">_spirit</span><span class="op">|</span> {
        <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Running...&quot;</span>);
        <span class="prelude-val">Ok</span>(())
    })</pre></div>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">spirit</span>::{<span class="ident">Empty</span>, <span class="ident">Extensible</span>, <span class="ident">Spirit</span>};
<span class="kw">use</span> <span class="ident">spirit</span>::<span class="ident">prelude</span>::<span class="kw-2">*</span>;

<span class="kw">fn</span> <span class="ident">cfg_print</span><span class="op">&lt;</span><span class="ident">E</span>: <span class="ident">Extensible</span><span class="op">&lt;</span><span class="prelude-val">Ok</span> <span class="op">=</span> <span class="ident">E</span><span class="op">&gt;</span><span class="op">&gt;</span>(<span class="ident">ext</span>: <span class="ident">E</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">E</span> {
    <span class="ident">ext</span>.<span class="ident">on_config</span>(<span class="op">|</span><span class="ident">_opts</span>, <span class="ident">_config</span><span class="op">|</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Config changed&quot;</span>))
}

<span class="ident">Spirit</span>::<span class="op">&lt;</span><span class="ident">Empty</span>, <span class="ident">Empty</span><span class="op">&gt;</span>::<span class="ident">new</span>()
    .<span class="ident">with</span>(<span class="ident">cfg_print</span>)
    .<span class="ident">run</span>(<span class="op">|</span><span class="ident">_spirit</span><span class="op">|</span> {
        <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Running...&quot;</span>);
        <span class="prelude-val">Ok</span>(())
    })</pre></div>
</div><h2 id='required-methods' class='small-section-header'>Required methods<a href='#required-methods' class='anchor'></a></h2><div class='methods'><h3 id='tymethod.apply' class='method'><code>fn <a href='#tymethod.apply' class='fnname'>apply</a>(self, builder: B) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;B, <a class="type" href="../../spirit/error/type.AnyError.html" title="type spirit::error::AnyError">AnyError</a>&gt;</code></h3><div class='docblock'><p>Perform the transformation on the given extensible.</p>
<p>And yes, it is possible to do multiple primitive transformations inside one extension (this
is what makes extensions useful for 3rd party crates, they can integrate with just one call
of <a href="../../spirit/extension/trait.Extensible.html#tymethod.with" title="Extensible::with"><code>with</code></a>).</p>
</div></div><span class='loading-content'>Loading content...</span><h2 id='implementors' class='small-section-header'>Implementors<a href='#implementors' class='anchor'></a></h2><div class='item-list' id='implementors-list'><h3 id='impl-Extension%3CB%3E' class='impl'><code class='in-band'>impl&lt;B, F, R&gt; Extension&lt;B&gt; for F <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(B) -&gt; R,<br>&nbsp;&nbsp;&nbsp;&nbsp;R: <a class="trait" href="../../spirit/extension/trait.IntoResult.html" title="trait spirit::extension::IntoResult">IntoResult</a>&lt;B&gt;,&nbsp;</span></code><a href='#impl-Extension%3CB%3E' class='anchor'></a><a class='srclink' href='../../src/spirit/extension.rs.html#661-669' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.apply' class="method hidden"><code>fn <a href='#method.apply' class='fnname'>apply</a>(self, builder: B) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;B, <a class="type" href="../../spirit/error/type.AnyError.html" title="type spirit::error::AnyError">AnyError</a>&gt;</code><a class='srclink' href='../../src/spirit/extension.rs.html#666-668' title='goto source code'>[src]</a></h4></div><h3 id='impl-Extension%3CB%3E-1' class='impl'><code class='in-band'>impl&lt;F, B, E, D, T&gt; Extension&lt;B&gt; for <a class="struct" href="../../spirit/fragment/pipeline/struct.Pipeline.html" title="struct spirit::fragment::pipeline::Pipeline">Pipeline</a>&lt;F, E, D, T, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a>B::<a class="type" href="../../spirit/extension/trait.Extensible.html#associatedtype.Opts" title="type spirit::extension::Extensible::Opts">Opts</a>, B::<a class="type" href="../../spirit/extension/trait.Extensible.html#associatedtype.Config" title="type spirit::extension::Extensible::Config">Config</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;B::<a class="type" href="../../spirit/extension/trait.Extensible.html#associatedtype.Config" title="type spirit::extension::Extensible::Config">Config</a>: <a class="trait" href="../../serde/de/trait.DeserializeOwned.html" title="trait serde::de::DeserializeOwned">DeserializeOwned</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;B::<a class="type" href="../../spirit/extension/trait.Extensible.html#associatedtype.Opts" title="type spirit::extension::Extensible::Opts">Opts</a>: <a class="trait" href="../../structopt/trait.StructOpt.html" title="trait structopt::StructOpt">StructOpt</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;B: <a class="trait" href="../../spirit/extension/trait.Extensible.html" title="trait spirit::extension::Extensible">Extensible</a>&lt;Ok = B&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;<a class="struct" href="../../spirit/fragment/pipeline/struct.CompiledPipeline.html" title="struct spirit::fragment::pipeline::CompiledPipeline">CompiledPipeline</a>&lt;B::<a class="type" href="../../spirit/extension/trait.Extensible.html#associatedtype.Opts" title="type spirit::extension::Extensible::Opts">Opts</a>, B::<a class="type" href="../../spirit/extension/trait.Extensible.html#associatedtype.Config" title="type spirit::extension::Extensible::Config">Config</a>, T, T::<a class="type" href="../../spirit/fragment/trait.Transformation.html#associatedtype.OutputInstaller" title="type spirit::fragment::Transformation::OutputInstaller">OutputInstaller</a>, D, E, T::<a class="type" href="../../spirit/fragment/trait.Transformation.html#associatedtype.OutputResource" title="type spirit::fragment::Transformation::OutputResource">OutputResource</a>, &lt;T::<a class="type" href="../../spirit/fragment/trait.Transformation.html#associatedtype.OutputInstaller" title="type spirit::fragment::Transformation::OutputInstaller">OutputInstaller</a> as <a class="trait" href="../../spirit/fragment/trait.Installer.html" title="trait spirit::fragment::Installer">Installer</a>&lt;T::<a class="type" href="../../spirit/fragment/trait.Transformation.html#associatedtype.OutputResource" title="type spirit::fragment::Transformation::OutputResource">OutputResource</a>, B::<a class="type" href="../../spirit/extension/trait.Extensible.html#associatedtype.Opts" title="type spirit::extension::Extensible::Opts">Opts</a>, B::<a class="type" href="../../spirit/extension/trait.Extensible.html#associatedtype.Config" title="type spirit::extension::Extensible::Config">Config</a>&gt;&gt;::<a class="type" href="../../spirit/fragment/trait.Installer.html#associatedtype.UninstallHandle" title="type spirit::fragment::Installer::UninstallHandle">UninstallHandle</a>&gt;: for&lt;'a&gt; <a class="trait" href="../../spirit/fragment/pipeline/trait.BoundedCompiledPipeline.html" title="trait spirit::fragment::pipeline::BoundedCompiledPipeline">BoundedCompiledPipeline</a>&lt;'a, B::<a class="type" href="../../spirit/extension/trait.Extensible.html#associatedtype.Opts" title="type spirit::extension::Extensible::Opts">Opts</a>, B::<a class="type" href="../../spirit/extension/trait.Extensible.html#associatedtype.Config" title="type spirit::extension::Extensible::Config">Config</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;D: <a class="trait" href="../../spirit/fragment/driver/trait.Driver.html" title="trait spirit::fragment::driver::Driver">Driver</a>&lt;F&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="../../spirit/fragment/trait.Fragment.html" title="trait spirit::fragment::Fragment">Fragment</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../../spirit/fragment/trait.Transformation.html" title="trait spirit::fragment::Transformation">Transformation</a>&lt;&lt;D::<a class="type" href="../../spirit/fragment/driver/trait.Driver.html#associatedtype.SubFragment" title="type spirit::fragment::driver::Driver::SubFragment">SubFragment</a> as <a class="trait" href="../../spirit/fragment/trait.Fragment.html" title="trait spirit::fragment::Fragment">Fragment</a>&gt;::<a class="type" href="../../spirit/fragment/trait.Fragment.html#associatedtype.Resource" title="type spirit::fragment::Fragment::Resource">Resource</a>, &lt;D::<a class="type" href="../../spirit/fragment/driver/trait.Driver.html#associatedtype.SubFragment" title="type spirit::fragment::driver::Driver::SubFragment">SubFragment</a> as <a class="trait" href="../../spirit/fragment/trait.Fragment.html" title="trait spirit::fragment::Fragment">Fragment</a>&gt;::<a class="type" href="../../spirit/fragment/trait.Fragment.html#associatedtype.Installer" title="type spirit::fragment::Fragment::Installer">Installer</a>, D::<a class="type" href="../../spirit/fragment/driver/trait.Driver.html#associatedtype.SubFragment" title="type spirit::fragment::driver::Driver::SubFragment">SubFragment</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;T::<a class="type" href="../../spirit/fragment/trait.Transformation.html#associatedtype.OutputInstaller" title="type spirit::fragment::Transformation::OutputInstaller">OutputInstaller</a>: <a class="trait" href="../../spirit/fragment/trait.Installer.html" title="trait spirit::fragment::Installer">Installer</a>&lt;T::<a class="type" href="../../spirit/fragment/trait.Transformation.html#associatedtype.OutputResource" title="type spirit::fragment::Transformation::OutputResource">OutputResource</a>, B::<a class="type" href="../../spirit/extension/trait.Extensible.html#associatedtype.Opts" title="type spirit::extension::Extensible::Opts">Opts</a>, B::<a class="type" href="../../spirit/extension/trait.Extensible.html#associatedtype.Config" title="type spirit::extension::Extensible::Config">Config</a>&gt; + 'static,&nbsp;</span></code><a href='#impl-Extension%3CB%3E-1' class='anchor'></a><a class='srclink' href='../../src/spirit/fragment/pipeline.rs.html#647-704' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.apply-1' class="method hidden"><code>fn <a href='#method.apply-1' class='fnname'>apply</a>(self, builder: B) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;B, <a class="type" href="../../spirit/error/type.AnyError.html" title="type spirit::error::AnyError">AnyError</a>&gt;</code><a class='srclink' href='../../src/spirit/fragment/pipeline.rs.html#674-703' title='goto source code'>[src]</a></h4></div></div><span class='loading-content'>Loading content...</span><script type="text/javascript" src="../../implementors/spirit/extension/trait.Extension.js" async></script></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../";window.currentCrate = "spirit";</script><script src="../../main.js"></script><script defer src="../../search-index.js"></script></body></html>